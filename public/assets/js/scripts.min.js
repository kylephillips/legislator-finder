var map_styles=[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}],map_styles_old=[{stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#151543"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#1bad90"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#151540"}]},{featureType:"administrative.province",elementType:"geometry",stylers:[{visibility:"on"},{color:"#232254"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#3696da"}]},{featureType:"administrative.locality",elementType:"labels.text.stroke",stylers:[{visibility:"simplified"},{color:"#151543"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#27275e"}]},{featureType:"water",stylers:[{visibility:"on"},{color:"#0e0e33"}]},{featureType:"administrative.neighborhood",elementType:"geometry",stylers:[{visibility:"on"}]}],map_polygon_fill="#0099c5",state_centers_json="/assets/js/state-centers.json",federal_congressional_districts_geojson="/assets/js/congressional-districts-115.geojson",state_to_fips_json="/assets/js/state-to-fips.json",state_district_boundaries="/state-district-boundaries",Toggle=function(){var t=this,o=jQuery;return t.activeBtn="",t.activeBlock="",t.selectors={toggleBtn:"[data-toggle]",toggleBlock:"[data-toggle-id]"},t.bindEvents=function(){o(document).on("click",t.selectors.toggleBtn,function(e){e.preventDefault(),t.activeBtn=o(this),t.toggle()})},t.toggle=function(){var e=o(t.activeBtn).attr("data-toggle");o(t.selectors.toggleBlock);if(o("*[data-toggle-id="+e+"]").is(":visible"))return o("*[data-toggle-id="+e+"]").hide(),t.toggleArrow(!0),void o(document).trigger("element-toggled-hidden",[t.activeBtn,o(e)]);o("*[data-toggle-id="+e+"]").show(),t.toggleArrow(!1),o(document).trigger("element-toggled-shown",[t.activeBtn,o(e)])},t.toggleArrow=function(e){e?o(t.activeBtn).find(".icon-arrow_up").removeClass("icon-arrow_up").addClass("icon-arrow_down"):o(t.activeBtn).find(".icon-arrow_down").removeClass("icon-arrow_down").addClass("icon-arrow_up")},t.bindEvents()},GeoCoder=function(){var o=this,a=jQuery;return o.lat=null,o.lng=null,o.formattedAddress=null,o.selectors={geoButton:"data-geolocation-button",form:"data-address-form",addressInput:"data-address-input",latInput:"data-latitude-input",lngInput:"data-longitude-input",formattedAddressInput:"data-formatted-address-input",submitBtn:"data-address-submit",loadingDiv:"data-loading",errorDiv:"data-error"},o.bindEvents=function(){a(document).ready(function(){o.toggleGeoLocation(),o.enableAutoComplete()}),a(document).on("location-changed",function(){o.populateAddressFields()}),a(document).on("click","["+o.selectors.submitBtn+"]",function(e){e.preventDefault(),o.submitForm()}),a(document).on("click","["+o.selectors.geoButton+"]",function(e){e.preventDefault(),o.geocodeLocation()})},o.toggleGeoLocation=function(){"https:"===location.protocol&&navigator.geolocation&&a("["+o.selectors.geoButton+"]").show()},o.geocodeLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){o.formattedAddress="Your Current Location",o.lat=e.coords.latitude,o.lng=e.coords.longitude}):o.displayError("Your location could not be determined at this time. Try entering an address.")},o.enableAutoComplete=function(){var t,e=a("["+o.selectors.addressInput+"]");0!==e.length&&(t=new google.maps.places.Autocomplete(e[0]),google.maps.event.addListener(t,"place_changed",function(){var e=t.getPlace();o.formattedAddress=e.formatted_address,o.lat=e.geometry.location.lat(),o.lng=e.geometry.location.lng(),a(document).trigger("location-changed")}))},o.submitForm=function(){o.toggleLoading(!0),o.lat||o.lng?a("["+o.selectors.form+"]").submit():o.geoCodeAddress()},o.populateAddressFields=function(){a("["+o.selectors.formattedAddressInput+"]").val(o.formattedAddress),a("["+o.selectors.latInput+"]").val(o.lat),a("["+o.selectors.lngInput+"]").val(o.lng)},o.geoCodeAddress=function(){var e=a("["+o.selectors.addressInput+"]").val();""===e?o.displayError("Please enter an address."):(geocoder=new google.maps.Geocoder).geocode({address:e},function(e,t){t==google.maps.GeocoderStatus.OK?(o.formattedAddress=e[0].formatted_address,o.lat=e[0].geometry.location.lat(),o.lng=e[0].geometry.location.lng(),o.populateAddressFields(),o.submitForm()):o.displayError("The address entered could not be found.")})},o.toggleLoading=function(e){if(e)return a("["+o.selectors.loadingDiv+"]").show(),void a("["+o.selectors.errorDiv+"]").hide();a("["+o.selectors.loadingDiv+"]").hide()},o.displayError=function(e){o.toggleLoading(!1),a("["+o.selectors.errorDiv+"]").text(e).show()},o.bindEvents()},StateMap=function(e,t){var o=this,a=jQuery;return o.state=e,o.container=t,o.centerLat=null,o.centerLng=null,o.fetchCenter=function(){a.ajax({url:state_centers_json,dataType:"json",success:function(e){for(var t=0;t<e.length;t++)e[t].state===o.state&&(o.centerLat=e[t].latitude,o.centerLng=e[t].longitude);o.drawStateMap()}})},o.drawStateMap=function(){var e=new google.maps.LatLng(o.centerLat,o.centerLng);map=new google.maps.Map(o.container[0],{center:e,zoom:6,mapTypeId:"roadmap",styles:map_styles}),(layer=new google.maps.FusionTablesLayer({styles:[{polygonOptions:{fillColor:map_polygon_fill,strokeColor:map_polygon_fill}}],suppressInfoWindows:!0})).setQuery({select:"geometry",from:"17aT9Ud-YnGiXdXEJUyycH2ocUqreOeKGbzCkUw",where:"'id' = '"+o.state+"'"}),layer.setMap(map),a(o.container[0]).removeClass("loading")},o.fetchCenter()},FederalHouseDistrictMap=function(e,t,o){var a=this,n=jQuery;return a.district=e,a.state=t,a.container=o,a.fipsCode=null,a.getFipsCode=function(){n.getJSON(state_to_fips_json,function(e){a.fipsCode=e[a.state],a.loadGeoJson()})},a.loadGeoJson=function(){n.getJSON(federal_congressional_districts_geojson,function(e){e=e.features;n.each(e,function(e,t){t.properties.STATEFP===a.fipsCode&&t.properties.CD115FP===a.district&&a.initializeMap(t)})})},a.initializeMap=function(e){var t=new google.maps.Map(a.container[0],{zoom:4,center:{lat:35.1825687,lng:-100.0268953},mapTypeId:"roadmap",styles:map_styles}),o=(t.data.addGeoJson({type:"FeatureCollection",features:[e]}),t.data.setStyle({fillColor:map_polygon_fill,strokeWeight:0}),new google.maps.LatLngBounds);t.data.forEach(function(e){e.getGeometry().forEachLatLng(function(e){o.extend(e)})}),t.fitBounds(o),n(a.container[0]).removeClass("loading")},a.getFipsCode()},StateDistrictMap=function(e,t,o,a,n){var s=this,r=jQuery;return s.token=e,s.chamber=t,s.state=o,s.district_number=a,s.container=n,s.boundary_data=null,s.getData=function(){r.ajax({url:state_district_boundaries,type:"POST",data:{_token:s.token,chamber:s.chamber,state:s.state,district_number:s.district_number},success:function(e){if("success"===e.status)return s.boundary_data=e,void s.loadMap();r(n[0]).hide()},error:function(e){r(n[0]).hide()}})},s.loadMap=function(){for(var e=new google.maps.Map(s.container[0],{center:new google.maps.LatLng(s.boundary_data.center_lat,s.boundary_data.center_lng),mapTypeID:google.maps.MapTypeId.ROADMAP,zoom:9,mapTypeControl:!1,scaleControl:!0,styles:map_styles}),t=[],o=0;o<s.boundary_data.coordinates[0][0].length;o++){var a={lat:(a=s.boundary_data.coordinates[0][0][o])[1],lng:a[0]};t.push(a)}var n=new google.maps.Polygon({paths:t,strokeWeight:0,fillColor:map_polygon_fill,fillOpacity:"0.8"});n.setMap(e),google.maps.Polygon.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds,t=this.getPaths(),o=0;o<t.getLength();o++)for(var a=t.getAt(o),n=0;n<a.getLength();n++)e.extend(a.getAt(n));return e},e.fitBounds(n.getBounds()),r(s.container[0]).removeClass("loading")},s.getData()},LegislatorFinder=function(){new Toggle,new GeoCoder};new LegislatorFinder;